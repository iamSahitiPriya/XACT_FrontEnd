<!--
  ~ Copyright (c) 2022 - Thoughtworks Inc. All rights reserved.
  -->

<div *ngIf="assessment">
  <div align="end" class="menu-bar-right">
    <div class="dataStatus">
      {{ assessmentUpdateStatus + (this.assessment.updatedAt | date:'medium')}}
    </div>
    <button [matTooltip]=generateReportToolTip id="generate-report" type="button" mat-stroked-button
            (click)="generateReport(); getTemplate();" class="btn-report">
      {{generateReportTitle}}
    </button>
    <button [matTooltip]=finishAssessmentToolTip *ngIf="assessment.assessmentStatus==='Active'" id="finishAssessment"
            type="button" mat-stroked-button
            class="btn-finish" (click)="confirmFinishAssessmentAction()">
      {{finishAssessmentTitle}}
    </button>
    <button [matTooltip]=reopenAssessmentToolTip *ngIf="assessment.assessmentStatus==='Completed'" id="reopenAssessment"
            type="button" mat-stroked-button
            class="btn-reopen" (click)="reopenAssessment()">
      {{reopenAssessmentTitle}}
    </button>

    <div class="menuButton">
      <button [matTooltip]=menuButtonToolTip mat-icon-button [matMenuTriggerFor]="menu" aria-label="menu">
        <img data-id="manage" src="../../assets/navigation-bar/menu-icon.svg" alt="manage icon" class="menuIcon"/>
      </button>
    </div>

    <mat-menu #menu="matMenu">
      <button (click)="openAssessment(content)" [matTooltip]=manageAssessmentToolTip mat-menu-item
              [disabled]="assessment.assessmentStatus ==='Completed'">
        <mat-icon class="iconColor">edit</mat-icon>
        <span id="createAssessment">{{manageAssessmentTitle}}</span>
      </button>

      <button mat-menu-item disabled>
        <mat-icon>exposure</mat-icon>
        <span>{{addModuleTitle}}</span>
      </button>

      <button mat-menu-item [routerLink]="['/assessment',assessmentId,'charts']"
              [matTooltip]=summaryTitleToolTip>
        <mat-icon class="iconColor"> multiline_chart</mat-icon>
        <span>{{summaryTitle}} <sup class="text-danger">Beta</sup></span>
      </button>

    </mat-menu>

    <ng-template #content>
      <app-create-assessments [assessment]="assessment"></app-create-assessments>
    </ng-template>

  </div>
</div>
