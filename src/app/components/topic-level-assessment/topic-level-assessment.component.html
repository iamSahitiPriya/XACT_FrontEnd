<!--
  ~ Copyright (c) 2022 - Thoughtworks Inc. All rights reserved.
  -->

<div class="topicQuestions" *ngIf="topicInput">
  <form #testForm="ngForm">
    <div *ngFor="let parameter of topicInput.parameters; let i=index;">
    <app-assessment-question [parameterDetails]="parameter" [initial]="i" [notes]="notes"></app-assessment-question>
    <div *ngIf="topicInput.assessmentLevel === 'Parameter'">
      <app-parameter-score [parameterScore]="parameter.references"></app-parameter-score>
      <app-assessment-recommendation></app-assessment-recommendation>
    </div>
  </div>
  <div *ngIf="topicInput.references">
    <app-topic-score [topicScore]="topicInput.references" [topicRatingAndRecommendation]="topicRatingAndRecommendation" [topicId]="topicInput.topicId" (topicRatingEmitter)="receiveRating($event)"></app-topic-score>
    <div>
      <app-topic-level-recommendation [topicRecommendation]="topicInput.topicId" [topicRatingAndRecommendation]="topicRatingAndRecommendation"></app-topic-level-recommendation>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3">
      <button [disabled]="selectedIndex===0" mat-stroked-button (click)="previous(testForm.pristine)" class="backButton">Back</button>
      <button mat-stroked-button (click)="next(testForm.pristine)" class="nextButton">Next</button>
    </div>
    <div class="col-md-8">
      <button mat-stroked-button class="cancelButton" id="cancel" [disabled]="testForm.pristine" (click)="cancel()" #submitButton >Cancel</button>
      <button mat-raised-button class="saveButton" >Save</button>
    </div>
  </div>
  </form>
</div>

