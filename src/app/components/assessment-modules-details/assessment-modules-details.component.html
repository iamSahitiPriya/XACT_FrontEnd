<!--
  ~ Copyright (c) 2022 - Thoughtworks Inc. All rights reserved.
  -->

<div class="row menu-bar">
  <div class="col-md-3">
    <mat-toolbar>
      <button matTooltip="Go back to dashboard" mat-icon-button [routerLink]="['']">
        <mat-icon class="backIcon">keyboard_backspace</mat-icon>
      </button>
      <span class="name"> {{assessment && assessment.assessmentName}}</span>
      <span class="module-spacer"></span>
    </mat-toolbar>
  </div>
  <div class="col-md-9 align-self-center">
    <app-assessment-header [assessmentId]="assessmentId"></app-assessment-header>
  </div>
</div>

<mat-toolbar class="moduleToolbar">
  <div class="moduleHead">
    {{assessmentModuleTitle}}
  </div>
</mat-toolbar>
<mat-tab-group #tabs mat-align-tabs="start" class="topicTab"
               (selectedTabChange)="tabChanged($event)">

  <mat-tab *ngFor="let topic of topics; let i=index" label={{topic.topicName}}>
    <ng-template matTabContent>
      <app-topic-level-assessment *ngIf="assessment" [topicInput]="topic"
                                  [selectedIndex]="selectedIndex"></app-topic-level-assessment>
    </ng-template>
  </mat-tab>


</mat-tab-group>

<div class="sideBar">
  <mat-expansion-panel *ngFor="let category of category.userAssessmentCategories; first as isFirst" [expanded]="isFirst">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{category.categoryName}}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="categoryModules" *ngIf="category">
      <mat-card class="moduleCard" (click)="navigate(module);tabs.selectedIndex=0"
                *ngFor="let module of category.modules"
                [ngClass]="{'moduleCard-active':moduleSelected === module.moduleId}">
        {{module.moduleName}}
      </mat-card>
    </div>

  </mat-expansion-panel>
</div>







