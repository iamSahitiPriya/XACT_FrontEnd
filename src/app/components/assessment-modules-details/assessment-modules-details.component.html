<!--
  ~ Copyright (c) 2022 - Thoughtworks Inc. All rights reserved.
  -->

<div class="row menu-bar">
  <div class="col-md-6">
    <mat-toolbar>
      <button mat-icon-button [routerLink]="['']">
        <mat-icon class="backIcon">keyboard_backspace</mat-icon>
      </button>
      <span class="name"> {{assessmentName}}</span>
      <span class="module-spacer"></span>
    </mat-toolbar>
  </div>
  <div class="col-md-6 align-self-center">
    <app-assessment-menu [assessmentId]="assessmentId"
                         [assessmentStatus]="assessment && assessment.assessmentStatus"
                         (statusEvent)="receiveStatus($event)"></app-assessment-menu>
  </div>
</div>

<mat-toolbar class="moduleToolbar">
  <div class="moduleHead">
    Modules
  </div>
</mat-toolbar>
<mat-tab-group #tabs mat-align-tabs="start" class="topicTab" [selectedIndex]="selectedIndex"
               (selectedTabChange)="tabChanged($event)">
  <mat-tab *ngFor="let topic of topics; let i=index" label={{topic.topicName}}>
    <div>
      <app-topic-level-assessment [topicInput]="topic" [selectedIndex]="selectedIndex"
                                  [assessmentId]="assessmentId"
                                  [assessmentStatus]="assessment && assessment.assessmentStatus"></app-topic-level-assessment>
    </div>
  </mat-tab>

</mat-tab-group>

<div class="sideBar">
  <mat-expansion-panel *ngFor="let category of category; first as isFirst" [expanded]="isFirst">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{category.categoryName}}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="categoryModules" *ngIf="category">
      <mat-card class="moduleCard" (click)="navigate(module);tabs.selectedIndex=0"
                *ngFor="let module of category.modules"
                [ngClass]="{'moduleCard-active':moduleSelected === module.moduleId}">
        {{module.moduleName}}
      </mat-card>
    </div>

  </mat-expansion-panel>
</div>







